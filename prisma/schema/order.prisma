/// =======================
/// ORDER
/// =======================

model Order {
    id         String      @id @default(uuid())
    customerId String
    providerId String
    status     OrderStatus @default(PLACED)

    deliveryAddress String
    totalAmount     Float

    provider ProviderProfile @relation(fields: [providerId], references: [id])
    customer User            @relation(fields: [customerId], references: [id])
    items    OrderItem[]

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@index([customerId])
    @@index([providerId])
}

/// =======================
/// ORDER ITEM (JOIN TABLE)
/// =======================

model OrderItem {
    id      String @id @default(uuid())
    orderId String
    mealId  String

    quantity Int
    price    Float

    order Order @relation(fields: [orderId], references: [id], onDelete: Cascade)
    meal  Meal  @relation(fields: [mealId], references: [id])

    @@index([orderId])
    @@index([mealId])
}

enum OrderStatus {
    PLACED
    PREPARING
    READY
    DELIVERED
    CANCELLED
}
